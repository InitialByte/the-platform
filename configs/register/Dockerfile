FROM alpine:3

RUN apk add --no-cache curl gettext
WORKDIR /usr/src/app
COPY . .
RUN chmod +x /usr/src/app/register.sh

ARG SERVICE_DISCOVERY_HOST
ARG SERVICE_DISCOVERY_PORT
ARG POSTGRES_NAME
ARG POSTGRES_PORT
ARG REDIS_NAME
ARG REDIS_PORT

ENV SERVICE_DISCOVERY_HOST $SERVICE_DISCOVERY_HOST
ENV SERVICE_DISCOVERY_PORT $SERVICE_DISCOVERY_PORT
ENV POSTGRES_NAME $POSTGRES_NAME
ENV POSTGRES_PORT $POSTGRES_PORT
ENV REDIS_NAME $REDIS_NAME
ENV REDIS_PORT $REDIS_PORT

CMD ["/usr/src/app/register.sh"]
